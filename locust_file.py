# -*- coding: utf-8 -*-
"""
Created on Thu Jul 13 10:44:03 2023

@author: jbr
"""
import socketio
import time
import random
from locust import HttpUser, task, between

class CustomUser(HttpUser):
    wait_time = between(0.2,0.2)
    
    
    
    # def __init__(self, *args, **kwargs):
    #     super().__init__(*args, **kwargs)
    #     self.user_port = None

    # def on_start(self):
    #    runner = self.environment.runner
    #    self.user_port = 7000 + runner.user_count
    #    self.client.host = f"http://localhost:{self.user_port}"

       
       

    
    
    @task #simple.py테스트용
    def getInfo(self):
        

        headers = {'Content-Type': 'text/plain'}
        data = '2023-07-05 09:10:04'
        self.client.post('/api/getRoboticsInfo', headers=headers, data=data.encode('utf-8'))

    # @task  #socket.py 테스트용
    # def sendInfo(self):
    #     headers = {'Content-Type': 'text/plain'}
    #     robot = ['robot111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111!',
    #               'robot222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222!',
    #               'robot333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333!',
    #               'robot444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444!',
    #               'robot555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555!']
    #     data = 'robot1, '+random.choice(robot)
    #     self.client.post('/api/sendRobotInfo', headers=headers, data=data.encode('utf-8'))

    # @task
    # def hello_world(self):
    #     sio = socketio.Client()
    #     sio.connect("http://192.168.0.152:2222",namespaces=['/robotics_info'])
    #     time.sleep(60)
    #     sio.disconnect()        
    

